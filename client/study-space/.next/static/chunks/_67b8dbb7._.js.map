{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/actions/quiz.action.js"],"sourcesContent":["'use server';\nimport { connectToDB } from \"@/database\";\nimport mongoose from \"mongoose\";\nimport { revalidatePath } from \"next/cache\";\nimport QuizModel from \"@/modals/quiz.modal\";\nimport { auth } from \"@clerk/nextjs/server\"; \nimport { ObjectId } from \"mongodb\";\nimport quizPage from \"@/app/quizPage/page\";\n\n/**\n * Get all todos\n * @returns \n */\nexport async function getQuizzes() {\n    try {\n        const db = await connectToDB();\n        const { userId } = await auth();\n        const quizzes = await QuizModel.find({ clerkId: userId }).lean();\n\n        const cleanQuizzes = quizzes.map(quiz => ({\n            ...quiz,\n            _id: quiz._id.toString(),\n        }));\n        \n        return cleanQuizzes;\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nexport async function createQuiz(quizData) {\n    const { userId } = await auth();\n  \n    const formattedQuestions = quizData.questions.map((q) => ({\n      question: q.question,\n      options: q.options,\n      explanation: q.explanation,\n      answerIndexes: q.correctAnswer,\n      \n    }));\n  \n    await QuizModel.create({\n      clerkId: userId,\n      quizTitle: quizData.questions[0]?.quizTitle || \"Untitled Quiz\",\n      questions: formattedQuestions,\n      quizType: quizData.questions[0]?.quizType || \"Untitled Option\",\n    });\n  \n    revalidatePath(\"/\");\n}\n  \nexport async function deleteQuiz(id){\n    await QuizModel.findOneAndDelete({_id: ObjectId.createFromHexString(id)})\n    revalidatePath(\"/\");\n}\n\nexport async function updateQuiz(id, newText){\n    await QuizModel.findByIdAndUpdate({_id: ObjectId.createFromHexString(id)}, {$set: {quizTitle: newText}})\n    revalidatePath(\"/\");\n}"],"names":[],"mappings":";;;;;;;IAmDsB,aAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/actions/quiz.action.js"],"sourcesContent":["'use server';\nimport { connectToDB } from \"@/database\";\nimport mongoose from \"mongoose\";\nimport { revalidatePath } from \"next/cache\";\nimport QuizModel from \"@/modals/quiz.modal\";\nimport { auth } from \"@clerk/nextjs/server\"; \nimport { ObjectId } from \"mongodb\";\nimport quizPage from \"@/app/quizPage/page\";\n\n/**\n * Get all todos\n * @returns \n */\nexport async function getQuizzes() {\n    try {\n        const db = await connectToDB();\n        const { userId } = await auth();\n        const quizzes = await QuizModel.find({ clerkId: userId }).lean();\n\n        const cleanQuizzes = quizzes.map(quiz => ({\n            ...quiz,\n            _id: quiz._id.toString(),\n        }));\n        \n        return cleanQuizzes;\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nexport async function createQuiz(quizData) {\n    const { userId } = await auth();\n  \n    const formattedQuestions = quizData.questions.map((q) => ({\n      question: q.question,\n      options: q.options,\n      explanation: q.explanation,\n      answerIndexes: q.correctAnswer,\n      \n    }));\n  \n    await QuizModel.create({\n      clerkId: userId,\n      quizTitle: quizData.questions[0]?.quizTitle || \"Untitled Quiz\",\n      questions: formattedQuestions,\n      quizType: quizData.questions[0]?.quizType || \"Untitled Option\",\n    });\n  \n    revalidatePath(\"/\");\n}\n  \nexport async function deleteQuiz(id){\n    await QuizModel.findOneAndDelete({_id: ObjectId.createFromHexString(id)})\n    revalidatePath(\"/\");\n}\n\nexport async function updateQuiz(id, newText){\n    await QuizModel.findByIdAndUpdate({_id: ObjectId.createFromHexString(id)}, {$set: {quizTitle: newText}})\n    revalidatePath(\"/\");\n}"],"names":[],"mappings":";;;;;;;IAwDsB,aAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/app/components/quiz.js"],"sourcesContent":["\"use client\"\nimport { useState } from \"react\"\nimport { deleteQuiz, updateQuiz } from \"@/actions/quiz.action\";\nimport Link from \"next/link\";\n\nexport default function Quiz({text, id}) {\n    const [showUpdateInput, setShowUpdateInput] = useState(false);\n    const [newText, setNewText] = useState(text);\n\n    const handleUpdate = (e) => {\n        e.preventDefault();\n        updateQuiz(id, newText);\n        setShowUpdateInput(!showUpdateInput);\n    };\n\n    return (\n        <div className=\"formInput\">\n            <div>\n            <Link key={id} href={`quizPage?quiz_id=${id}`} className=\"quizHover\">\n                {text}\n            </Link>\n            </div>\n            {showUpdateInput && (\n                <input\n                    value={newText}\n                    onChange={(e) => setNewText(e.target.value)}\n                    type=\"text\"\n                    className=\"formInput\"\n                />\n            )}\n\n            <div>\n                {showUpdateInput ? (\n                    <button onClick={() => setShowUpdateInput(!showUpdateInput)}>\n                        Cancel\n                    </button>\n                ) : (\n                    <button onClick={() => deleteQuiz(id)}>\n                        Delete\n                    </button>\n                )}\n\n                {showUpdateInput ? (\n                    <button onClick={handleUpdate}>\n                        Save\n                    </button>\n                ) : (\n                    <button onClick={() => setShowUpdateInput(!showUpdateInput)}>\n                        Update\n                    </button>\n                )}\n                \n            </div>\n        </div>\n    )\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;;;AAHA;;;;AAKe,SAAS,KAAK,KAAU;QAAV,EAAC,IAAI,EAAE,EAAE,EAAC,GAAV;;IACzB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,eAAe,CAAC;QAClB,EAAE,cAAc;QAChB,IAAA,gKAAU,EAAC,IAAI;QACf,mBAAmB,CAAC;IACxB;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;0BACD,cAAA,6LAAC,0KAAI;oBAAU,MAAM,AAAC,oBAAsB,OAAH;oBAAM,WAAU;8BACpD;mBADM;;;;;;;;;;YAIV,iCACG,6LAAC;gBACG,OAAO;gBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gBAC1C,MAAK;gBACL,WAAU;;;;;;0BAIlB,6LAAC;;oBACI,gCACG,6LAAC;wBAAO,SAAS,IAAM,mBAAmB,CAAC;kCAAkB;;;;;6CAI7D,6LAAC;wBAAO,SAAS,IAAM,IAAA,gKAAU,EAAC;kCAAK;;;;;;oBAK1C,gCACG,6LAAC;wBAAO,SAAS;kCAAc;;;;;6CAI/B,6LAAC;wBAAO,SAAS,IAAM,mBAAmB,CAAC;kCAAkB;;;;;;;;;;;;;;;;;;AAQjF;GAlDwB;KAAA","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/app/quizPage/page.js"],"sourcesContent":["\"use client\";\nimport { useSearchParams } from \"next/navigation\";\nimport { useState, useEffect } from \"react\";\n\nexport default function QuizPage() {\n  const searchParams = useSearchParams();\n  const quiz_id = searchParams.get(\"quiz_id\");\n  const [quiz, setQuiz] = useState(null);\n  const [answers, setAnswers] = useState({}); // stores selected answers\n  const [submitted, setSubmitted] = useState(false);\n  const [scoreCount, setScoreCount] = useState(0);\n\n  useEffect(() => {\n    if (!quiz_id) return;\n\n    const fetchQuiz = async () => {\n      try {\n        const res = await fetch(`/api/get-quiz?id=${quiz_id}`);\n        const data = await res.json();\n        setQuiz(data);\n      } catch (err) {\n        console.error(\"Error fetching quiz:\", err);\n      }\n    };\n\n    fetchQuiz();\n  }, [quiz_id]);\n\n  const handleSingleSelect = (questionIndex, optionIndex) => {\n    if (submitted) return;\n    setAnswers((prev) => ({\n      ...prev,\n      [questionIndex]: [optionIndex] \n    }));\n  };\n\n  const handleMultipleToggle = (questionIndex, optionIndex) => {\n    if (submitted) return;\n\n    setAnswers((prev) => {\n      const current = prev[questionIndex] || [];\n      return current.includes(optionIndex)\n        ? { ...prev, [questionIndex]: current.filter((x) => x !== optionIndex) }\n        : { ...prev, [questionIndex]: [...current, optionIndex] };\n    });\n  };\n\n  const handleSubmit = () => {\n    if (Object.keys(answers).length !== quiz.questions.length) {\n      alert(\"Please answer all questions before submitting!\");\n      return;\n    }\n\n    let score = 0;\n\n    quiz.questions.forEach((q, i) => {\n      const correct = [...q.answerIndexes].sort(); \n      const selected = [...(answers[i] || [])].sort();\n\n      const match =\n        correct.length === selected.length &&\n        correct.every((val, idx) => val === selected[idx]);\n\n      if (match) score++;\n    });\n\n    setScoreCount(score);\n    setSubmitted(true);\n  };\n\n  if (!quiz) return <div>Quiz not found</div>;\n\n  return (\n    <div>\n      <h1>{quiz.quizTitle}</h1>\n\n      {submitted && (\n        <h2 style={{ fontWeight: \"bold\" }}>\n          Score: {scoreCount}/{quiz.questions.length}\n        </h2>\n      )}\n\n      <ul>\n        {quiz.questions?.map((q, i) => {\n          const selected = answers[i] || [];\n\n          return (\n            <li key={i} style={{ marginBottom: \"20px\" }}>\n              <p>{i + 1}. {q.question}</p>\n\n              <ul>\n                {q.options.map((opt, optIndex) => {\n                  const isSelected = selected.includes(optIndex);\n                  const isCorrect = submitted && q.answerIndexes.includes(optIndex);\n                  const isWrong = submitted && isSelected && !isCorrect;\n\n                  const handleClick =\n                    quiz.quizType === \"Multiple Answer\"\n                      ? () => handleMultipleToggle(i, optIndex)\n                      : () => handleSingleSelect(i, optIndex);\n\n                  return (\n                    <li\n                      key={optIndex}\n                      onClick={handleClick}\n                      style={{\n                        cursor: submitted ? \"default\" : \"pointer\",\n                        fontWeight: isSelected ? \"bold\" : \"normal\",\n                        color: isCorrect ? \"green\" : isWrong ? \"red\" : \"black\",\n                        display: \"flex\",\n                        alignItems: \"center\"\n                      }}\n                    >\n                      {quiz.quizType === \"Multiple Answer\" && (\n                        <input\n                          type=\"checkbox\"\n                          checked={isSelected}\n                          readOnly\n                          style={{ marginRight: \"8px\" }}\n                        />\n                      )}\n                      {opt}\n                    </li>\n                  );\n                })}\n              </ul>\n\n              {submitted && (\n                <p style={{ fontWeight: \"bold\", marginTop: \"5px\" }}>\n                  Explanation: {q.explanation}\n                </p>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n\n      {!submitted && <button onClick={handleSubmit}>Submit Quiz</button>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}