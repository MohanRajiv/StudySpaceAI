{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/app/quizPage/page.js"],"sourcesContent":["\"use client\";\nimport { useSearchParams } from \"next/navigation\";\nimport { useState, useEffect } from \"react\";\n\nexport default function QuizPage() {\n  const searchParams = useSearchParams();\n  const quiz_id = searchParams.get(\"quiz_id\");\n  const [quiz, setQuiz] = useState(null);\n  const [answers, setAnswers] = useState({}); // stores selected answers\n  const [submitted, setSubmitted] = useState(false);\n  const [scoreCount, setScoreCount] = useState(0);\n\n  useEffect(() => {\n    if (!quiz_id) return;\n\n    const fetchQuiz = async () => {\n      try {\n        const res = await fetch(`/api/get-quiz?id=${quiz_id}`);\n        const data = await res.json();\n        setQuiz(data);\n      } catch (err) {\n        console.error(\"Error fetching quiz:\", err);\n      }\n    };\n\n    fetchQuiz();\n  }, [quiz_id]);\n\n  const handleSingleSelect = (questionIndex, optionIndex) => {\n    if (submitted) return;\n    setAnswers((prev) => ({\n      ...prev,\n      [questionIndex]: [optionIndex] \n    }));\n  };\n\n  const handleMultipleToggle = (questionIndex, optionIndex) => {\n    if (submitted) return;\n\n    setAnswers((prev) => {\n      const current = prev[questionIndex] || [];\n      return current.includes(optionIndex)\n        ? { ...prev, [questionIndex]: current.filter((x) => x !== optionIndex) }\n        : { ...prev, [questionIndex]: [...current, optionIndex] };\n    });\n  };\n\n  const handleSubmit = () => {\n    if (Object.keys(answers).length !== quiz.questions.length) {\n      alert(\"Please answer all questions before submitting!\");\n      return;\n    }\n\n    let score = 0;\n\n    quiz.questions.forEach((q, i) => {\n      const correct = [...q.answerIndexes].sort(); \n      const selected = [...(answers[i] || [])].sort();\n\n      const match =\n        correct.length === selected.length &&\n        correct.every((val, idx) => val === selected[idx]);\n\n      if (match) score++;\n    });\n\n    setScoreCount(score);\n    setSubmitted(true);\n  };\n\n  if (!quiz) return <div>Quiz not found</div>;\n\n  return (\n    <div>\n      <h1 className=\"quizPageTitleText\">{quiz.quizTitle}</h1>\n\n      {submitted && (\n        <h2 className=\"score\">\n          Score: {scoreCount}/{quiz.questions.length}\n        </h2>\n      )}\n\n      <ul>\n        {quiz.questions?.map((q, i) => {\n          const selected = answers[i] || [];\n\n          return (\n            <li key={i} style={{ marginBottom: \"20px\" }}>\n              <p className=\"quizPageQuestionText\">{i + 1}. {q.question}</p>\n\n             \n                {q.questionType === \"Dropdown\" && (\n                   <div className=\"quizPageOptions\">\n                  <select\n                    onChange={(e) => handleSingleSelect(i, Number(e.target.value))}\n                    className=\"input-quiz-option-main\"\n                    value={answers[i]?.[0] ?? \"\"}\n                  >\n                    <option value=\"\" disabled>Select an answer</option>\n                      {q.options.map((opt, idx) => (\n                        <option key={idx} value={idx}>\n                          {opt}\n                        </option>\n                      ))}\n                  </select>\n                  {submitted && (\n                  <div>\n                    Correct Answer: {q.options[q.answerIndexes[0]]}\n                  </div>\n                )}\n                  </div>\n\n                )}\n                \n              \n              {q.questionType !== \"Dropdown\" && ( \n                <ul className=\"quizPageOptions\">\n                  {q.options.map((opt, optIndex) => {\n                    const isSelected = selected.includes(optIndex);\n                    const isCorrect = submitted && q.answerIndexes.includes(optIndex);\n                    const isWrong = submitted && isSelected && !isCorrect;\n\n                    const handleClick =\n                      q.questionType === \"Multiple Answer\"\n                        ? () => handleMultipleToggle(i, optIndex)\n                        : () => handleSingleSelect(i, optIndex);\n\n                    return (\n                      <li\n                        key={optIndex}\n                        onClick={handleClick}\n                        style={{\n                          cursor: submitted ? \"default\" : \"pointer\",\n                          fontWeight: isSelected ? \"bold\" : \"normal\",\n                          color: isCorrect ? \"green\" : isWrong ? \"red\" : \"white\",\n                          display: \"flex\",\n                          alignItems: \"center\"\n                        }}\n                      >\n                        {q.questionType === \"Multiple Answer\" && (\n                          <input\n                            type=\"checkbox\"\n                            checked={isSelected}\n                            readOnly\n                            style={{ marginRight: \"8px\" }}\n                          />\n                        )}\n\n                        {opt}\n                      </li>\n                    );\n                  })}\n                </ul>\n              )}\n\n              {submitted && (\n                <p className=\"quizPageQuestionText\">\n                  Explanation: {q.explanation}\n                </p>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n      {!submitted && <button className=\"submitQuizButton\" onClick={handleSubmit}>Submit Quiz</button>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}