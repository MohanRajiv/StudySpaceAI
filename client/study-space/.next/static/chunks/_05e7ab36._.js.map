{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/actions/quiz.action.js"],"sourcesContent":["'use server';\nimport { connectToDB } from \"@/database\";\nimport mongoose from \"mongoose\";\nimport { revalidatePath } from \"next/cache\";\nimport QuizModel from \"@/modals/quiz.modal\";\nimport { auth } from \"@clerk/nextjs/server\"; \nimport { ObjectId } from \"mongodb\";\n\n/**\n * Get all todos\n * @returns \n */\nexport async function getQuizzes() {\n    try {\n        const db = await connectToDB();\n        const { userId } = await auth();\n        const quizzes = await QuizModel.find({ clerkId: userId }).lean();\n\n        const cleanQuizzes = quizzes.map(quiz => ({\n            ...quiz,\n            _id: quiz._id.toString(),\n        }));\n        \n        return cleanQuizzes;\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nexport async function createQuiz(quizData) {\n    const { userId } = await auth();\n  \n    const formattedQuestions = quizData.questions.map((q) => ({\n      question: q.question,\n      options: q.options,\n      explanation: q.explanation,\n      answerIndexes: q.correctAnswer,\n      questionType: q.questionType,\n    }));\n  \n    await QuizModel.create({\n      clerkId: userId,\n      quizTitle: quizData.questions[0]?.quizTitle || \"Untitled Quiz\",\n      questions: formattedQuestions,\n      quizType: quizData.questions[0]?.quizType || \"Untitled Option\",\n    });\n  \n    revalidatePath(\"/\");\n}\n  \nexport async function deleteQuiz(id){\n    await QuizModel.findOneAndDelete({_id: ObjectId.createFromHexString(id)})\n    revalidatePath(\"/\");\n}\n\nexport async function updateQuiz(id, newText){\n    await QuizModel.findByIdAndUpdate({_id: ObjectId.createFromHexString(id)}, {$set: {quizTitle: newText}})\n    revalidatePath(\"/\");\n}"],"names":[],"mappings":";;;;;;;IA6BsB,aAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/actions/flashcard.action.js"],"sourcesContent":["'use server';\nimport { connectToDB } from \"@/database\";\nimport mongoose from \"mongoose\";\nimport { revalidatePath } from \"next/cache\";\nimport QuizModel from \"@/modals/quiz.modal\";\nimport { auth } from \"@clerk/nextjs/server\"; \nimport { ObjectId } from \"mongodb\";\nimport FlashcardModel from \"@/modals/flashcard.modal\";\n\n/**\n * Get all todos\n * @returns \n */\nexport async function getFlashcards() {\n    try {\n        const db = await connectToDB();\n        const { userId } = await auth();\n        const flashcards = await FlashcardModel.find({ clerkId: userId }).lean();\n\n        const cleanFlashcards = flashcards.map(flashcard => ({\n            ...flashcard,\n            _id: flashcard._id.toString(),\n        }));\n        \n        return cleanFlashcards;\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nexport async function createFlashcard(flashcardData) {\n    const { userId } = await auth();\n  \n    await FlashcardModel.create({\n      clerkId: userId,\n      flashcardTitle: flashcardData.questions[0]?.flashcardTitle || \"Untitled Flashcard Set\",\n      questions: flashcardData.questions[0]?.questions,\n      answers: flashcardData.questions[0]?.answers,\n      quizType: flashcardData.questions[0]?.quizType || \"Untitled Option\",\n    });\n  \n    revalidatePath(\"/\");\n}\n  \nexport async function deleteFlashcard(id){\n    await FlashcardModel.findOneAndDelete({_id: ObjectId.createFromHexString(id)})\n    revalidatePath(\"/\");\n}\n\nexport async function updateFlashcard(id, newText){\n    await FlashcardModel.findByIdAndUpdate({_id: ObjectId.createFromHexString(id)}, {$set: {flashcardTitle: newText}})\n    revalidatePath(\"/\");\n}"],"names":[],"mappings":";;;;;;;IA8BsB,kBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/app/create/page.js"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { createQuiz } from \"@/actions/quiz.action\";\nimport { createFlashcard } from \"@/actions/flashcard.action\";\n\nexport default function CreateQuiz() {\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [value, setValue] = useState(\"\");\n  const [textValue, setTextValue] = useState(\"\");\n  const [youtubeUrl, setYoutubeUrl] = useState(\"\");\n  const [quizType, setQuizType] = useState(\"\");\n  const [inputType, setInputType] = useState(\"\");\n  const [pdfFiles, setPdfFiles] = useState([]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!quizType) {\n      alert(\"Please select a quiz type to generate a quiz.\");\n      return;\n    }\n\n    if (!inputType) {\n      alert(\"Please select an input type.\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n      let extractedText = \"\";\n\n      if (inputType === \"PDF\") {\n        const files = Array.from(e.target.querySelector('input[type=\"file\"]').files);\n        if (files.length === 0) {\n          alert(\"Please upload at least one PDF file\");\n          return;\n        }\n      \n        let combinedText = \"\";\n      \n        for (const file of files) {\n          const formData = new FormData();\n          formData.append(\"file\", file);\n      \n          const res = await fetch(\"/api/parse-pdf\", {\n            method: \"POST\",\n            body: formData,\n          });\n      \n          const data = await res.json();\n          combinedText += \"\\n\" + (data.text || \"\");\n        }\n      \n        extractedText = combinedText.trim();\n      }      \n      else if (inputType === \"Text\") {\n        if (!textValue.trim()) {\n          alert(\"Please enter text to generate the quiz.\");\n          return;\n        }\n        extractedText = textValue;\n      }\n      else if (inputType === \"YouTube\") {\n        if (!youtubeUrl.trim()) {\n          alert(\"Please enter a YouTube URL.\");\n          return;\n        }\n\n        const res = await fetch(\"/api/youtube-route\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ url: youtubeUrl.trim() }),\n        });\n\n        if (!res.ok) {\n          const errorData = await res.json();\n          throw new Error(errorData.error || \"Failed to fetch YouTube transcript\");\n        }\n\n        const data = await res.json();\n        extractedText = data.text || \"\";\n\n        if (!extractedText) {\n          throw new Error(\"No transcript text was returned from the video.\");\n        }\n      }\n      else if (inputType === \"Multimodal\") {\n        let combinedText = \"\";\n        const files = Array.from(e.target.querySelector('input[type=\"file\"]').files);\n\n        if ((files.length == 0) && !(textValue.trim()) && !(youtubeUrl.trim())){\n          alert(\"Please enter a input.\");\n          return;\n        }\n\n        if (files.length != 0) {\n          for (const file of files) {\n            const formData = new FormData();\n            formData.append(\"file\", file);\n        \n            const res = await fetch(\"/api/parse-pdf\", {\n              method: \"POST\",\n              body: formData,\n            });\n        \n            const data = await res.json();\n            combinedText += \"\\n\" + (data.text || \"\");\n          }\n        }\n        if (textValue.trim()) {\n          combinedText += \"\\n\" + textValue;\n        }\n        if (youtubeUrl.trim()) {\n          const res = await fetch(\"/api/youtube-route\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ url: youtubeUrl.trim() }),\n          });\n  \n          if (!res.ok) {\n            const errorData = await res.json();\n            throw new Error(errorData.error || \"Failed to fetch YouTube transcript\");\n          }\n  \n          const data = await res.json();\n          combinedText += \"\\n\" + (data.text || \"\");\n        }\n        \n        extractedText = combinedText.trim();\n      }\n\n      const quizRes = await fetch(\"/api/gemini-route\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          text: extractedText,\n          numOfQuestions: value,\n          quizType: quizType,\n        }),\n      });\n\n      const quizData = await quizRes.json();\n\n      let parsedQuiz;\n      try {\n        const cleanedText = quizData.text\n          .replace(/```json/i, \"\")\n          .replace(/```/g, \"\")\n          .trim();\n\n        parsedQuiz = JSON.parse(cleanedText);\n      } catch (error) {\n        console.error(\"Error parsing quizData.text:\", error);\n        alert(\"Failed to parse quiz data â€” Gemini output wasn't valid JSON\");\n        return;\n      }\n\n      if (quizType == \"Flashcard\"){\n        setText(parsedQuiz.flashcardTitle || \"\");\n        await createFlashcard(parsedQuiz);\n      }\n      else {\n        setText(parsedQuiz.quizTitle || \"\");\n        await createQuiz(parsedQuiz);\n      }\n    } catch (error) {\n      console.error(error);\n      alert(\"An error occurred while generating the quiz.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <div>Create Quiz</div>\n      <form onSubmit={handleSubmit}>\n        <select\n          onChange={(e) => setQuizType(e.target.value)}\n          className=\"formInput\"\n          value={quizType}\n        >\n          <option value=\"\">-- Select a quiz type --</option>\n          <option value=\"Multiple Choice\">Multiple Choice</option>\n          <option value=\"True or False\">True or False</option>\n          <option value=\"Multiple Answer\">Multiple Answer</option>\n          <option value=\"Mixed Format\">Mixed Format</option>\n          <option value=\"Flashcard\">Flashcard Set</option>\n        </select>\n\n        <select\n          onChange={(e) => setInputType(e.target.value)}\n          className=\"formInput\"\n          value={inputType}\n        >\n          <option value=\"\">-- Select an input type --</option>\n          <option value=\"PDF\">PDF</option>\n          <option value=\"Text\">Text</option>\n          <option value=\"YouTube\">YouTube</option>\n          <option value=\"Multimodal\">Multimodal</option>\n        </select>\n\n        <input\n          type=\"number\"\n          value={value}\n          className=\"formInput\"\n          onChange={(e) => setValue(e.target.value)}\n          placeholder=\"Enter # of questions\"\n        />\n\n        {(inputType === \"PDF\" || inputType === \"Multimodal\") && (\n          <>\n            <input\n              type=\"file\"\n              className=\"formInput\"\n              multiple accept=\"application/pdf\"\n              onChange={(e) => setPdfFiles(Array.from(e.target.files))}\n            />\n          </>\n        )}      \n\n        {(inputType === \"Text\" || inputType === \"Multimodal\") && (\n          <input\n            type=\"text\"\n            value={textValue}\n            className=\"formInput\"\n            placeholder=\"Enter text\"\n            onChange={(e) => setTextValue(e.target.value)}\n          />\n        )}\n\n        {(inputType === \"YouTube\" || inputType === \"Multimodal\") && (\n          <input\n            type=\"url\"\n            value={youtubeUrl}\n            className=\"formInput\"\n            placeholder=\"Enter YouTube URL (e.g., https://www.youtube.com/watch?v=...)\"\n            onChange={(e) => setYoutubeUrl(e.target.value)}\n          />\n        )}\n\n        <button className=\"formButton\" disabled={loading}>\n          {loading ? \"Processing...\" : \"Submit\"}\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}