{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/app/api/gemini-route/route.js"],"sourcesContent":["import { GoogleGenerativeAI } from \"@google/generative-ai\";\nimport { NextResponse } from \"next/server\";\n\nexport async function POST(req) {\n  try {\n    const {text, numOfQuestions, quizType, questionTypes} = await req.json(); \n\n    if (!text || !numOfQuestions) {\n      return NextResponse.json({ error: \"No text or video input provided\" }, { status: 400 });\n    }\n\n    const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);\n    const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash\" });\n\n    const prompt = `\n    You are an expert quiz and flashcard generator. You MUST return valid JSON only.\n    No notes, no markdown, no explanations outside the JSON.\n    \n    ====================================\n    REQUIREMENTS\n    ====================================\n    \n    1. If the user selected multiple question types, questionTypes and numOfQuestions are \n    parallel arrays if they have the same number of elements.\n      Example:\n        questionTypes = [\"MCQ\", \"TF\", \"MA\"]\n        numOfQuestions = [3, 5, 2]\n      This means:\n        • Generate 3 MCQ\n        • Generate 5 True/False\n        • Generate 2 Multiple Answer\n\n    2. You MUST generate the exact number of questions per type:\n        ${JSON.stringify(questionTypes)}  \n        ${JSON.stringify(numOfQuestions)}\n\n    3. If the user selected multiple question types and numOfQuestions has \n    only one element.\n      Example:\n        questionTypes = [\"MCQ\", \"TF\", \"MA\"]\n        numOfQuestions = [5]\n      This means:\n        • Generate 5 questions and the number of MCQ, True/False, and\n          Multiple Answer questions is random.\n\n    4. Items MUST match the provided quizType.\n\n    5. Distribute questions randomly if multiple question types are selected.\n\n    ====================================\n    QUIZ FORMAT (USED WHEN quizType=\"Quiz\")\n    ====================================\n    Return this EXACT JSON shape:\n\n    {\n      \"questions\": [\n       {\n        \"quizTitle\": \"Quiz Title Here\",\n        \"quizType\": \"Quiz\",\n        \"question\": \"Question text?\",\n        \"options\": [\"A\", \"B\", \"C\", \"D\"],\n        \"correctAnswer\": [0],\n        \"explanation\": \"Reason\",\n        \"questionType\": \"Multiple Choice | True or False | Multiple Answer | Dropdown\"\n        }\n      ]\n    }\n\n    Rules:\n    • Multiple Choice: ALWAYS 4 options, 1 correct answer.\n    • True or False: options MUST be [\"True\",\"False\"].\n    • Multiple Answer: 4 options, multiple correct indices.\n    • Dropdown: 3-4 options, 1 correct answer.\n\n    ====================================\n    FLASHCARD FORMAT (quizType=\"Flashcard\")\n    ====================================\n\n    1. If the user selected multiple question types, questionTypes and numOfQuestions are \n    parallel arrays if they have the same number of elements.\n      Example:\n        questionTypes = [\"Definitions\", \"Questions\"]\n        numOfQuestions = [3, 5]\n      This means:\n        • Generate 3 Definition Flashcards\n        • Generate 5 Question Flashcards\n\n    2. You MUST generate the exact number of Flashcards per type:\n        ${JSON.stringify(questionTypes)}  \n        ${JSON.stringify(numOfQuestions)}\n\n    3. If the user selected multiple question types and numOfQuestions has \n    only one element.\n      Example:\n        questionTypes = [\"Definitions\", \"Questions\"]\n        numOfQuestions = [5]\n      This means:\n        • Generate 5 Flashcards and the number of Definition Flashcards and\n          Question Flashcards is random.\n\n    4. Distribute flashcards randomly if multiple question types are selected.\n\n    Return this JSON:\n    {\n      \"questions\": [\n          {\n          \"flashcardTitle\": \"Quiz Title here\",\n          \"quizType\": \"${quizType}\",\n          \"questions\": [\"Question or Definition here\", \"Question or Definition here\", ...],\n          \"answers\": [\"Answer\", \"Answer\", ...],\n          }\n      ]\n    }\n\n    Rules:\n    • Questions and answers must both be arrays of length ${JSON.stringify(numOfQuestions)}\n\n    Text to analyze:\n    ${text}\n    Number of Questions:\n    ${JSON.stringify(numOfQuestions)}\n    Quiz Type:\n    ${quizType}\n    Question Types (array):\n    ${JSON.stringify(questionTypes)}\n    `;\n\n    const result = await model.generateContent(prompt);\n    const output = result.response.text(); \n\n    return NextResponse.json({ text: output }); \n  } catch (error) {\n    console.error(\"Error calling Gemini API:\", error);\n    return NextResponse.json(\n      { error: \"Failed to generate quiz\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,EAAC,IAAI,EAAE,cAAc,EAAE,QAAQ,EAAE,aAAa,EAAC,GAAG,MAAM,IAAI,IAAI;QAEtE,IAAI,CAAC,QAAQ,CAAC,gBAAgB;YAC5B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkC,GAAG;gBAAE,QAAQ;YAAI;QACvF;QAEA,MAAM,QAAQ,IAAI,sLAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc;QAC/D,MAAM,QAAQ,MAAM,kBAAkB,CAAC;YAAE,OAAO;QAAmB;QAEnE,MAAM,SAAS,CAAC;;;;;;;;;;;;;;;;;;;QAmBZ,EAAE,KAAK,SAAS,CAAC,eAAe;QAChC,EAAE,KAAK,SAAS,CAAC,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAsDjC,EAAE,KAAK,SAAS,CAAC,eAAe;QAChC,EAAE,KAAK,SAAS,CAAC,gBAAgB;;;;;;;;;;;;;;;;;;uBAkBlB,EAAE,SAAS;;;;;;;;0DAQwB,EAAE,KAAK,SAAS,CAAC,gBAAgB;;;IAGvF,EAAE,KAAK;;IAEP,EAAE,KAAK,SAAS,CAAC,gBAAgB;;IAEjC,EAAE,SAAS;;IAEX,EAAE,KAAK,SAAS,CAAC,eAAe;IAChC,CAAC;QAED,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,SAAS,OAAO,QAAQ,CAAC,IAAI;QAEnC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,MAAM;QAAO;IAC1C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA0B,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}