{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/actions/quiz.action.js"],"sourcesContent":["'use server';\nimport { connectToDB } from \"@/database\";\nimport mongoose from \"mongoose\";\nimport { revalidatePath } from \"next/cache\";\nimport QuizModel from \"@/modals/quiz.modal\";\nimport { auth } from \"@clerk/nextjs/server\"; \nimport { ObjectId } from \"mongodb\";\nimport quizPage from \"@/app/quizPage/page\";\n\n/**\n * Get all todos\n * @returns \n */\nexport async function getQuizzes() {\n    try {\n        const db = await connectToDB();\n        const { userId } = await auth();\n        const quizzes = await QuizModel.find({ clerkId: userId }).lean();\n\n        const cleanQuizzes = quizzes.map(quiz => ({\n            ...quiz,\n            _id: quiz._id.toString(),\n        }));\n        \n        return cleanQuizzes;\n    } catch (e) {\n        console.log(e);\n    }\n}\n\nexport async function createQuiz(quizData) {\n    const { userId } = await auth();\n  \n    const formattedQuestions = quizData.questions.map((q) => ({\n      question: q.question,\n      options: q.options,\n      explanation: q.explanation,\n      answerIndex: q.correctAnswer,\n    }));\n  \n    await QuizModel.create({\n      clerkId: userId,\n      quizTitle: quizData.questions[0]?.quizTitle || \"Untitled Quiz\",\n      questions: formattedQuestions,\n    });\n  \n    revalidatePath(\"/\");\n}\n  \nexport async function deleteQuiz(id){\n    await QuizModel.findOneAndDelete({_id: ObjectId.createFromHexString(id)})\n    revalidatePath(\"/\");\n}\n\nexport async function updateQuiz(id, newText){\n    await QuizModel.findByIdAndUpdate({_id: ObjectId.createFromHexString(id)}, {$set: {quizTitle: newText}})\n    revalidatePath(\"/\");\n}"],"names":[],"mappings":";;;;;;;IA8BsB,aAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/Downloads/study-space-ai/client/study-space/app/create/page.js"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { createQuiz } from \"@/actions/quiz.action\";\n\nexport default function CreateQuiz() {\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [loadingTwo, setLoadingTwo] = useState(false);\n  const [value, setValue] = useState('');\n  const [textValue, setTextValue] = useState('');\n  const [quizType, setQuizType] = useState(\"\");\n\n  const handleNumberChange = (e) => {\n    setValue(e.target.value);\n  };\n\n  const handleTextChange = (e) => {\n    setTextValue(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (quizType !== \"Multiple Choice\" && quizType !== \"True or False\" ) {\n      alert(\"Please select a quiz type to generate a quiz.\");\n      return;\n    }\n\n    const file = e.target[2].files[0];\n    if (!file) return alert(\"Please upload a PDF file\");\n\n    try {\n      setLoading(true);\n\n      const formData = new FormData();\n      formData.append(\"file\", file);\n  \n      const res = await fetch(\"/api/parse-pdf\", {\n        method: \"POST\",\n        body: formData,\n      });\n  \n      const data = await res.json();\n      const extractedText = data.text || \"\";\n\n      const quizRes = await fetch(\"/api/gemini-route\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ text: extractedText, numOfQuestions: value, quizType: quizType}),\n      });\n    \n      const quizData = await quizRes.json();\n    \n      let parsedQuiz;\n      try {\n        const cleanedText = quizData.text\n        .replace(/```json/i, \"\")\n        .replace(/```/g, \"\")\n        .trim();\n\n        parsedQuiz = JSON.parse(cleanedText);\n      } catch (error) {\n        console.error(\"Error parsing quizData.text:\", error);\n        alert(\"Failed to parse quiz data — Gemini output wasn't valid JSON\");\n        return;\n      }\n\n      setText(parsedQuiz.quizTitle || \"\");\n      await createQuiz(parsedQuiz);\n    \n    }\n    catch (error){\n      console.log(error);\n    }\n    finally {\n      setLoading(false);\n    }\n  };  \n\n  const handleSubmitText = async (e) => {\n    e.preventDefault();\n\n    if (quizType !== \"Multiple Choice\" && quizType !== \"True or False\" ) {\n      alert(\"Please select a quiz type to generate a quiz.\");\n      return;\n    }\n\n    try {\n      setLoadingTwo(true);\n\n      const quizRes = await fetch(\"/api/gemini-route\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ text: textValue, numOfQuestions: value, quizType: quizType}),\n      });\n\n      const quizData = await quizRes.json();\n    \n      let parsedQuiz;\n      try {\n        const cleanedText = quizData.text\n        .replace(/```json/i, \"\")\n        .replace(/```/g, \"\")\n        .trim();\n\n        parsedQuiz = JSON.parse(cleanedText);\n      } catch (error) {\n        console.error(\"Error parsing quizData.text:\", error);\n        alert(\"Failed to parse quiz data — Gemini output wasn't valid JSON\");\n        return;\n      }\n\n      setText(parsedQuiz.quizTitle || \"\");\n      await createQuiz(parsedQuiz);\n\n    }\n    catch (error){\n        console.log(error);\n    }\n    finally {\n        setLoadingTwo(false);\n    }\n  }\n\n  return (\n    <div>\n  \n      <div>Create Quiz by PDF</div>\n      <form onSubmit={handleSubmit}>\n        <select\n          onChange={(e)=> setQuizType(e.target.value)}\n          className=\"formInput\"\n          value={quizType}\n        >\n          <option value=\"\">-- Select a quiz type --</option>\n          <option value=\"Multiple Choice\">Multiple Choice</option>\n          <option value=\"True or False\">True or False</option>\n        </select>\n        <input\n          type=\"number\"\n          className=\"formInput\"\n          onChange={handleNumberChange}\n          placeholder=\"Enter # questions\"\n        />\n        <input type=\"file\" className=\"formInput\" />\n        <button className=\"formButton\" disabled={loading}>\n          {loading ? \"Processing PDF...\": \"Submit PDF\"}\n        </button>\n      </form>\n\n      <div>Create Quiz by Text Input</div>\n      <form onSubmit={handleSubmitText}>\n        <select\n          onChange={(e)=> setQuizType(e.target.value)}\n          className=\"formInput\"\n          value={quizType}\n        >\n          <option value=\"\">-- Select a quiz type --</option>\n          <option value=\"Multiple Choice\">Multiple Choice</option>\n          <option value=\"True or False\">True or False</option>\n        </select>\n        <input\n          type=\"number\"\n          className=\"formInput\"\n          onChange={handleNumberChange}\n          placeholder=\"Enter # questions\"\n        />\n        <input \n          type=\"text\" \n          className=\"formInput\"\n          placeholder=\"Enter text\" \n          onChange={handleTextChange}\n        />\n        <button className=\"formButton\" disabled={loadingTwo}>\n          {loadingTwo ? \"Processing Text...\": \"Submit Text\"}\n        </button>\n      </form>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}